<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="projects.css" />
    <title>Blog</title>
  </head>
  <body>
    <nav>
      <div class="name">
        <img src="img/usericon.png" alt="" class="profilepic" />
        <h2>Ye Xinkang</h2>
      </div>
      <button class="contact">Contact</button>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="learncs.html">CS Resources</a></li>
        <li><a href="learnds.html">DS Resources</a></li>
        <li><a href="links.html">Interesting Links</a></li>
        <li>
          <a href="https://github.com/xk1234"
            ><span class="fa-brands fa-github"></span
          ></a>
        </li>
        <li>
          <a href="https://www.linkedin.com/in/ye-xinkang-4486a218b "
            ><span class="fa-brands fa-linkedin"></span
          ></a>
        </li>
      </ul>
    </nav>
    <h1>Blog - WIP</h1>
    <ul class="posts">
        <li>Loading</li>
    </ul>
    <script>
        let PROJECT_ID = "hvocnetm";
        let DATASET = "production";
        let QUERY = encodeURIComponent('*[_type == "post"]');
        let URL = `https://${PROJECT_ID}.api.sanity.io/v2021-10-21/data/query/${DATASET}?query=${QUERY}`;
        fetch(URL)
        .then((res) => res.json())
        .then(({ result }) => {
          // get the list element, and the first item
          let list = document.querySelector("ul.posts");
          let firstListItem = document.querySelector("ul.posts li");

          if (result.length > 0) {
            // remove the placeholder content
            list.removeChild(firstListItem);
            result.forEach((post) => {
                console.log(post)
              let listItem = document.createElement("li");
              listItem.textContent = post?.title + " - " + post?.excerpt;
              list.appendChild(listItem);
            });
          }
        })
        .catch((err) => console.error(err));
    </script>
  </body>
</html>
